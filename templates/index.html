{% extends "base.html" %}
{% load crispy_forms_tags %}

{% block body %}

    <div class="row">
        <div class="col-md-6">
            <div class="text-center">
                <h2>Caluculate</h2>
                <form class="" action="" method="post">
                    {% csrf_token %}
                    {{ form.non_field_errors }}
                    <div class="fieldWrapper">
                        {{ form.num1.errors }}
                        <label for="{{ form.num1.id_for_label }}"></label>
                        {{ form.num1 }}
                    </div>

                    <div class="fieldWrapper " data-toggle="buttons">
                        {{ form.operator.errors }}
                        {# <label for="{{ form.operator.id_for_label }}"></label>#}
                        {% for field in form.operator  %}
                            <span class="btn btn-primary operators text-center">{{ field }}</span>
                        {% endfor %}
                        {# <label class="btn btn-primary active">{{ form.operator }}</label>#}
                        {# {{ form.operator }}#}
                    </div>

                    <div class="fieldWrapper">
                        {{ form.num2.errors }}
                        <label for="{{ form.num2.id_for_label }}"></label>
                        {{ form.num2 }}
                    </div>
                    <input type="submit" name="submit" value="Calculate">
                </form>
            </div>
        </div>

        <div class="col-md-6">
            {% if request.user.is_authenticated %}
            <h2>Your Calculation History</h2>
            {% else %}
            <form class="" action="{% url 'login' %}" method="post">
                {% csrf_token %}
                {{ login_form|crispy }}
                <input type="submit" name="login" value="Login">
            </form>
            Create an account to save your Calculation history.
            {% endif %}

            <ul>

            {% if request.session %}
            {{ request.session.calc_session }}
            {% else %}
                {% for calc in calc_hist %}
                    <li>{{ calc.num1 }} {{ calc.operator }} {{ calc.num2 }} = <strong>{{ calc.result }}</strong></li>
                    <em>{{ calc.get_result }}</em>
                {% endfor %}
            {% endif %}

            {# {% if calc_session %}#}
            {# {% for calc in calc_session %}#}
            {# <li>{{ calc.num1 }} {{ calc.operator }} {{ calc.num2 }} = <strong>{{ calc.result }}</strong></li>#}
            {# {% endfor %}#}
            {# {% endif %}#}
            </ul>
        </div>
    </div>


{% endblock %}
